# ProFTPD Configuration - Otimizado para performance e simplicidade
# Configuração para ambiente de testes multi-domínio

# Configurações básicas
ServerName "Conn2Flow FTP Server"
ServerType standalone
DefaultServer on
Port 21

# Usuário e grupo do processo
User www-data
Group www-data

# Configurações de performance (RÁPIDAS!)
MaxInstances 30
UseReverseDNS off
UseLastlog off

# Configurações de segurança básicas
RootLogin off
RequireValidShell off

# Configurações de diretório padrão
DefaultRoot ~ !adm
AllowOverwrite on
DisplayLogin welcome.msg
DisplayChdir .message

# Configurações de timeout otimizadas
TimeoutNoTransfer 600
TimeoutStalled 600
TimeoutIdle 1200

# Configurações de modo passivo
PassivePorts 21100 21110
MasqueradeAddress 0.0.0.0

# Configurações de log simplificadas
TransferLog /var/log/proftpd/xferlog
SystemLog /var/log/proftpd/proftpd.log

# Configurações para usuários virtuais
AuthUserFile /etc/proftpd/ftpd.passwd
AuthGroupFile /etc/proftpd/ftpd.group
AuthOrder mod_auth_file.c

# Configurações de permissões (para corrigir problema de permissões)
Umask 022 022

# Configuração para múltiplos domínios
<Directory />
  AllowOverwrite yes
  <Limit READ WRITE>
    AllowAll
  </Limit>
</Directory>

# Configurações específicas por usuário (será criado dinamicamente)
Include /etc/proftpd/conf.d/*.conf
