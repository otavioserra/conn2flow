# Configuração Multi-Domínio para Conn2Flow
# =============================================

# Domínio principal - localhost (mantém compatibilidade)
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/sites/localhost/public_html
    
    ErrorLog ${APACHE_LOG_DIR}/localhost-error.log
    CustomLog ${APACHE_LOG_DIR}/localhost-access.log combined
    
    <Directory /var/www/sites/localhost/public_html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.php index.html
    </Directory>
    
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>
</VirtualHost>

# Site 1 - site1.local
<VirtualHost *:80>
    ServerName site1.local
    DocumentRoot /var/www/sites/site1.local/public_html
    
    ErrorLog ${APACHE_LOG_DIR}/site1-error.log
    CustomLog ${APACHE_LOG_DIR}/site1-access.log combined
    
    <Directory /var/www/sites/site1.local/public_html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.php index.html
    </Directory>
    
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>
</VirtualHost>

# Site 2 - site2.local
<VirtualHost *:80>
    ServerName site2.local
    DocumentRoot /var/www/sites/site2.local/public_html
    
    ErrorLog ${APACHE_LOG_DIR}/site2-error.log
    CustomLog ${APACHE_LOG_DIR}/site2-access.log combined
    
    <Directory /var/www/sites/site2.local/public_html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.php index.html
    </Directory>
    
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>
</VirtualHost>

# Configurações globais de segurança e cache
<Files ~ "^\.">
    Order allow,deny
    Deny from all
</Files>

<Files ~ "\.(log|sql|conf)$">
    Order allow,deny
    Deny from all
</Files>

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/ico "access plus 1 month"
    ExpiresByType image/icon "access plus 1 month"
    ExpiresByType text/plain "access plus 1 month"
</IfModule>
