# HTML/CSS Structure Cleanup and Standardization

## Objective

To standardize and organize all visual resources of the system (layouts, pages, and components) into physical files, facilitating versioning, maintenance, and development, without losing the flexibility for users to edit through the platform.


## Adopted Structure

- **gestor/**
    - **resources/**
        - **layouts/**: Global system layouts.
            - `layout-id/`
                - `layout-id.html`
                - `layout-id.css`
        - **paginas/**: Pages not linked to modules.
            - `page-id/`
                - `page-id.html`
                - `page-id.css`
        - **componentes/**: Reusable components.
            - `component-id/`
                - `component-id.html`
                - `component-id.css`

    - **modulos/**
        - `module-name/`
            - `page-id/`
                - `page-id.html`
                - `page-id.css`
            - ...

- **gestor-cliente/**
    - **modulos/**
        - `module-name/`
            - `page-id/`
                - `page-id.html`
                - `page-id.css`
            - ...

- **gestor-plugins/**
    - `plugin-name/`
        - **local/**
            - **modulos/**
                - `module-name/`
                    - `page-id.html`
                    - `page-id.css`
        - **remoto/**
            - **modulos/**
                - `module-name/`
                    - `page-id.html`
                    - `page-id.css`

### Example of plugin structure:

gestor-plugins/
    agendamentos/
        local/
            modulos/
                agendamentos/
        remoto/
            modulos/
                agendamentos-host/


## Rules

- All exported files must be saved as children of the `gestor/` folder (i.e., `gestor/resources/layouts/`, `gestor/resources/paginas/`, `gestor/resources/componentes/`, `gestor/modulos/` etc.), never in the repository root.
- For module pages, only create files if the module folder already exists in one of these paths:
    - `gestor/modulos/{module}/`
-    - `gestor-plugins/{plugin}/local/modulos/{module}/`
-    - `gestor-plugins/{plugin}/remoto/modulos/{module}/`
-    - `gestor-cliente/modulos/{module}/`
- If the module folder does not exist, do not create anything and register it as an orphan to be reported at the end.
- The folder and file names will always be the resource's `id`.
- Each resource has its separate HTML and CSS.
- Global resources are placed in `gestor/resources/`.
- The database continues to be the source for user edits, but the physical files are the reference for developers and versioning.
- In the future, a synchronization and diff routine between the database and files will be created.



## Automatic module cleanup

A cleanup script was created that removes files and folders that do not belong to the correct module in all structures:
- `gestor/modulos/`
- `gestor-plugins/*/local/modulos/`
- `gestor-plugins/*/remoto/modulos/`
- `gestor-cliente/modulos/`

The script keeps only subfolders and files that truly belong to the module (following the pattern `{module}/{id}/{id}.html` and `.css`). It removes loose files, subfolders from other modules, and any junk generated by incorrect exports.

## Important Observations

- There are resources (pages, layouts, components) that can be created by other flows, such as "emission" or distributed hosts, and do not appear in the main seeders. These cases must be handled separately.
- The `modulo` field in the seeder must exactly match the module's folder name for the export to work correctly.
- Orphaned resources (without a corresponding module folder) are exported as global pages in `gestor/resources/paginas/{id}/{id}.html` and `.css`.

## History

- **2025-08-04**: Removal of orphan layouts from seeders.
- **2025-08-05**: Adjustment in the upload to create directories inheriting parent permissions.
- **2025-08-05**: Definition and validation of the HTML/CSS file structure for layouts, pages, and components.
- **2025-08-05**: Planning for exporting seeders to physical files.
- **2025-08-05**: Implementation of an automatic cleanup script for modules and orphan resources.
- **2025-08-05**: Inclusion of support for gestor-cliente/modulos/ and rules for resources created by other flows.

---

> Documentation automatically generated by the GitHub Copilot AI agent.
